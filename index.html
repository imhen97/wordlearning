<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Vocab - Fun English Expression</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://unpkg.com/lucide@latest"></script>
  <!-- Kakao SDK -->
  <script src="https://t1.kakaocdn.net/kakao_js_sdk/2.7.0/kakao.min.js" integrity="sha384-l+xbElFSnPZ2rOaPrU//2FF5B4LB8FiX5q4fXYTlfcG4PGpMkE1vcL7kNXI6Cci0" crossorigin="anonymous"></script>
  <!-- Google SDK -->
  <script src="https://accounts.google.com/gsi/client" async defer></script>
</head>
<body>
  <div class="app-container">
    <!-- Login Section -->
    <section id="loginSection" class="section login-screen">
      <div class="login-content">
        <div class="login-logo">
          <div class="logo-icon">V</div>
          <h1>Vocab</h1>
          <p>하루 3분, 가장 쉬운 영어 학습</p>
        </div>

        <div class="login-buttons">
          <button id="kakaoLogin" class="btn-login kakao">
            <img src="https://developers.kakao.com/assets/img/lib/logos/kakaotalksharing/kakaotalk_sharing_btn_medium.png" alt="Kakao">
            카카오톡으로 시작하기
          </button>
          <button id="googleLogin" class="btn-login google">
            <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="Google">
            구글 계정으로 시작하기
          </button>
          <button id="guestLogin" class="btn-text">게스트로 둘러보기</button>
        </div>
      </div>
      <p class="login-footer">로그인 시 이용약관 및 개인정보 처리방침에 동의하게 됩니다.</p>
    </section>

    <header class="header" style="display: none;">
      <div class="level-badge">
        <span id="userLevelIcon">🌱</span>
        <span id="userLevelTitle">입문자</span>
      </div>
      <div class="stats">
        <div class="stat-item streak">
          <i data-lucide="flame"></i>
          <span id="streakCount">0</span>
        </div>
        <div class="stat-item xp">
          <i data-lucide="zap"></i>
          <span id="totalXp">0</span>
        </div>
      </div>
    </header>

    <main class="content">
      <section id="homeSection" class="section">
        <div class="welcome-msg">
          <h2>안녕하세요, <span id="userName">학습자</span>님! 👋</h2>
          <p>오늘의 학습 목표까지 <strong><span id="remainingXp">20</span> XP</strong> 남았어요.</p>
        </div>

        <div class="main-card primary-action" id="startTodayLesson">
          <div class="card-content">
            <span class="tag">TODAY'S PICK</span>
            <h3>오늘의 필수 표현 학습</h3>
            <p>실제 원어민들이 매일 쓰는 3가지 문장</p>
          </div>
          <div class="card-icon">
            <i data-lucide="play-circle"></i>
          </div>
        </div>

        <div class="grid-container">
          <div class="mini-card">
            <h4>학습 리포트</h4>
            <div class="progress-bar">
              <div class="progress-fill" id="dailyProgressBar" style="width: 0%;"></div>
            </div>
            <p class="sub-text">오늘 목표 <span id="dailyProgressText">0/10</span> 단어</p>
          </div>
          <div class="mini-card">
            <h4>스피킹 챌린지</h4>
            <i data-lucide="mic" class="accent-icon"></i>
            <p class="sub-text">아직 완료 전</p>
          </div>
        </div>

        <div class="section-header">
          <h3>카테고리별 탐색</h3>
          <button class="text-btn">전체보기</button>
        </div>
        <div class="category-scroll">
          <div class="cat-item" data-category="daily">🏠 일상</div>
          <div class="cat-item" data-category="business">💼 업무</div>
          <div class="cat-item" data-category="travel">✈️ 여행</div>
          <div class="cat-item" data-category="dating">❤️ 연애</div>
          <div class="cat-item" data-category="slang">🔥 슬랭</div>
        </div>
      </section>

      <section id="librarySection" class="section" style="display: none;">
        <h2>학습 라이브러리</h2>
        <div id="categoryGrid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
          <!-- Categories will be dynamic -->
        </div>
      </section>

      <!-- Practice Section (Entry) -->
      <section id="practiceSection" class="section" style="display: none;">
        <div class="welcome-msg">
          <h2>연습 모드 🎯</h2>
          <p>퀴즈로 실력을 확인하고 추가 XP를 획득하세요.</p>
        </div>
        
        <div class="main-card primary-action" id="startQuizBtn" style="background: #ff9600; box-shadow: 0 6px 0 #cc7800;">
          <div class="card-content">
            <span class="tag" style="background: rgba(255,255,255,0.2)">DAILY CHALLENGE</span>
            <h3>오늘의 단어 퀴즈</h3>
            <p>5문제를 맞히고 50 XP 보너스 받기</p>
          </div>
          <div class="card-icon"><i data-lucide="award"></i></div>
        </div>

        <!-- Proficiency Checkup Card -->
        <div class="main-card primary-action" id="startTestBtn" style="background: #a855f7; box-shadow: 0 6px 0 #7e22ce; margin-top: -15px;">
          <div class="card-content">
            <span class="tag" style="background: rgba(255,255,255,0.2)">SKILL CHECK</span>
            <h3>실력 진단 테스트</h3>
            <p id="testStatusText">내 등급을 확인해보세요!</p>
          </div>
          <div class="card-icon"><i data-lucide="line-chart"></i></div>
        </div>

        <div class="mini-card" style="width: 100%; margin-top: 20px;">
          <h4>최근 퀴즈 성적</h4>
          <p class="sub-text">아직 기록이 없습니다. 첫 퀴즈를 시작해보세요!</p>
        </div>
      </section>

      <!-- Level Test Section -->
      <section id="testSection" class="section" style="display: none;">
        <div class="learning-header">
          <button id="closeTest" class="icon-btn"><i data-lucide="x"></i></button>
          <div class="learning-progress">
            <div class="progress-bar"><div id="testProgressBar" class="progress-fill" style="width: 0%; background: #a855f7;"></div></div>
          </div>
          <span id="testProgressText">1/10</span>
        </div>

        <div class="quiz-container">
          <div class="question-box" style="background: #fdf4ff; padding: 30px; border-radius: 20px; text-align: center; margin-bottom: 25px; border: 2px solid #f5d0fe;">
            <span class="card-tag" style="position: static; color: #a855f7;">LEVEL CHECK</span>
            <h1 id="testQuestion" style="font-size: 1.4rem; margin-top: 15px;">Loading...</h1>
          </div>

          <div id="testOptions" class="options-grid" style="display: grid; gap: 12px;">
            <!-- Options -->
          </div>
        </div>
      </section>

      <!-- Test Result Section -->
      <section id="resultSection" class="section" style="display: none; text-align: center;">
        <div class="result-box" style="padding: 40px 20px;">
          <div id="resultRankBadge" class="rank-badge-large">A1</div>
          <h2 id="resultRankTitle" style="margin: 20px 0 10px 0; font-size: 1.8rem; font-weight: 800;">초보자 등급</h2>
          <p id="resultRankDesc" style="color: var(--text-sub); font-weight: 600; margin-bottom: 30px;">기본적인 표현을 이해하고 사용할 수 있습니다.</p>
          
          <div class="stats-grid" style="margin-bottom: 40px;">
            <div class="stat-card">
              <span class="stat-value" id="testScore">0/10</span>
              <span class="stat-label">정답</span>
            </div>
            <div class="stat-card">
              <span class="stat-value" id="testTime">0:30</span>
              <span class="stat-label">시간</span>
            </div>
          </div>

          <button id="backToPractice" class="btn-primary" style="width: 100%; background: #a855f7; box-shadow: 0 4px 0 #7e22ce;">확인</button>
        </div>
      </section>

      <!-- Profile Section -->
      <section id="profileSection" class="section" style="display: none;">
        <div class="profile-header">
          <div class="avatar-circle">
            <span id="profileLevelIcon">🌱</span>
          </div>
          <h2 id="profileName">학습자님</h2>
          <p id="profileLevelTitle" class="level-text">입문자 (Level 1)</p>
        </div>

        <div class="stats-grid">
          <div class="stat-card">
            <i data-lucide="zap" style="color: #3b82f6;"></i>
            <div class="stat-info">
              <span class="stat-value" id="statTotalXp">0</span>
              <span class="stat-label">누적 XP</span>
            </div>
          </div>
          <div class="stat-card">
            <i data-lucide="flame" style="color: #ff9600;"></i>
            <div class="stat-info">
              <span class="stat-value" id="statStreak">0</span>
              <span class="stat-label">스트릭</span>
            </div>
          </div>
          <div class="stat-card">
            <i data-lucide="award" style="color: #58cc02;"></i>
            <div class="stat-info">
              <span class="stat-value" id="statLevel">1</span>
              <span class="stat-label">현재 레벨</span>
            </div>
          </div>
        </div>

        <div class="settings-group">
          <h3>계정 설정</h3>
          <div class="settings-item" id="editNameBtn">
            <div class="item-left">
              <i data-lucide="user-cog"></i>
              <span>이름 변경</span>
            </div>
            <i data-lucide="chevron-right" class="chevron"></i>
          </div>
          <div class="settings-item">
            <div class="item-left">
              <i data-lucide="bell"></i>
              <span>학습 알림 설정</span>
            </div>
            <div class="toggle-mock"></div>
          </div>
        </div>

        <div class="settings-group">
          <h3>앱 정보</h3>
          <div class="settings-item">
            <div class="item-left">
              <i data-lucide="help-circle"></i>
              <span>도움말 및 지원</span>
            </div>
            <i data-lucide="external-link" class="chevron"></i>
          </div>
          <div class="settings-item danger" id="resetProgressBtn">
            <div class="item-left">
              <i data-lucide="trash-2"></i>
              <span>학습 데이터 초기화</span>
            </div>
          </div>
        </div>
      </section>

      <!-- Quiz Gameplay Section -->
      <section id="quizSection" class="section" style="display: none;">
        <div class="learning-header">
          <button id="closeQuiz" class="icon-btn"><i data-lucide="x"></i></button>
          <div class="learning-progress">
            <div class="progress-bar"><div id="quizProgressBar" class="progress-fill" style="width: 0%; background: #ff9600;"></div></div>
          </div>
          <span id="quizProgressText">1/5</span>
        </div>

        <div class="quiz-container">
          <div class="question-box" style="background: var(--surface); padding: 30px; border-radius: 20px; text-align: center; margin-bottom: 25px; border: 2px solid #e5e7eb;">
            <span class="card-tag" style="position: static; color: #ff9600;">QUIZ</span>
            <h1 id="quizQuestion" style="font-size: 1.5rem; margin-top: 15px;">"Getting cold feet"의 뜻은?</h1>
          </div>

          <div id="quizOptions" class="options-grid" style="display: grid; gap: 12px;">
            <!-- Options will be injected here -->
          </div>
        </div>

        <!-- Quiz Feedback Overlay -->
        <div id="quizFeedback" class="feedback-overlay" style="display: none; position: fixed; bottom: 0; left: 50%; transform: translateX(-50%); width: 100%; max-width: 480px; padding: 30px 20px; background: white; border-top: 4px solid #22c55e; z-index: 1000; box-shadow: 0 -10px 40px rgba(0,0,0,0.1);">
          <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 20px;">
            <div id="feedbackIconBox" style="width: 50px; height: 50px; border-radius: 50%; display: flex; align-items: center; justify-content: center; background: #dcfce7; color: #22c55e;">
              <i data-lucide="check-circle" id="fbIcon"></i>
            </div>
            <div>
              <h4 id="feedbackStatus" style="margin: 0; font-size: 1.2rem; font-weight: 800; color: #166534;">정답입니다!</h4>
              <p id="feedbackMeaning" style="margin: 4px 0 0 0; font-size: 0.9rem; color: #166534; font-weight: 600;">Good job!</p>
            </div>
          </div>
          <button id="nextQuizBtn" style="width: 100%; height: 56px; border: none; border-radius: 16px; background: #22c55e; color: white; font-size: 1.1rem; font-weight: 800; cursor: pointer; box-shadow: 0 4px 0 #166534;">계속하기</button>
        </div>
      </section>

      <!-- Learning Section (Card Swipe) -->
      <section id="learningSection" class="section" style="display: none;">
        <div class="learning-header">
          <button id="closeLearning" class="icon-btn"><i data-lucide="x"></i></button>
          <div class="learning-progress">
            <div class="progress-bar"><div id="lessonProgressBar" class="progress-fill" style="width: 0%;"></div></div>
          </div>
          <span id="lessonProgressText">1/3</span>
        </div>

        <div class="card-stack-container">
          <div id="activeCard" class="swipe-card">
            <div class="card-front">
              <span class="card-tag">EXPRESSION</span>
              <h1 id="cardWord">Getting cold feet</h1>
              <div class="audio-btn" id="playAudio"><i data-lucide="volume-2"></i></div>
              <p class="card-hint">Tap to see meaning</p>
            </div>
            <div class="card-back">
              <h2 id="cardMeaning">겁이 나다 (무서워지다)</h2>
              <div class="example-box">
                <p id="cardSentence">I'm getting cold feet about the wedding.</p>
                <p id="cardTranslation">결혼식에 대해 좀 겁이 나기 시작했어.</p>
              </div>
            </div>
          </div>
          
          <!-- Feedback overlays -->
          <div class="swipe-feedback like">KNOW</div>
          <div class="swipe-feedback nope">STUDY</div>
        </div>

        <div class="learning-controls">
          <button class="control-btn nope" id="btnNope"><i data-lucide="x"></i></button>
          <button class="control-btn info" id="btnFlip"><i data-lucide="rotate-cw"></i></button>
          <button class="control-btn like" id="btnLike"><i data-lucide="check"></i></button>
        </div>
      </section>
    </main>

    <nav class="bottom-nav">
      <button class="nav-item active" data-target="home">
        <i data-lucide="home"></i>
        <span>홈</span>
      </button>
      <button class="nav-item" data-target="library">
        <i data-lucide="book-open"></i>
        <span>탐색</span>
      </button>
      <button class="nav-item" data-target="practice">
        <i data-lucide="target"></i>
        <span>연습</span>
      </button>
      <button class="nav-item" data-target="profile">
        <i data-lucide="user"></i>
        <span>프로필</span>
      </button>
    </nav>
  </div>

  <script src="store.js"></script>
  <script src="gamification.js"></script>
  <script src="main.js"></script>
  <script>lucide.createIcons();</script>
</body>
</html>
